(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{265:function(t,e,n){t.exports=n.p+"assets/img/8.dd0a2cfd.png"},266:function(t,e,n){t.exports=n.p+"assets/img/9.1b44e25c.png"},267:function(t,e,n){t.exports=n.p+"assets/img/10.075700d1.png"},268:function(t,e,n){t.exports=n.p+"assets/img/11.0ddf944f.png"},269:function(t,e,n){t.exports=n.p+"assets/img/12.717f73f9.png"},270:function(t,e,n){t.exports=n.p+"assets/img/13.ce1e97ca.png"},310:function(t,e,n){"use strict";n.r(e);var a=n(28),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"简单静态资源管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单静态资源管理"}},[t._v("#")]),t._v(" 简单静态资源管理")]),t._v(" "),a("h2",{attrs:{id:"使用-html-模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-html-模板"}},[t._v("#")]),t._v(" 使用 html 模板")]),t._v(" "),a("p",[t._v("很多时候我们既需要 html 页面引入 webpack 最新生成的 js，css 等资源，有希望能够对主页面进行一些定制化的修改，例如：修改 titile，添加一些全局的样式，引入自定义的插件等。这个时候就需要用到一个插件 HtmlWebpackPlugin")]),t._v(" "),a("p",[t._v("首先通过命令"),a("code",[t._v("npm i html-webpack-plugin --save-dev")]),t._v("安装该插件。")]),t._v(" "),a("p",[t._v("在 src 目录下新建 html 模板")]),t._v(" "),a("p",[t._v("然后修改 webpack 通用配置 webpack.common.js 如下:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('const path = require("path");\nconst HtmlWebpackPlugin = require("html-webpack-plugin");\n\nmodule.exports = {\n  entry: {\n    main: "./src/main.js"\n  },\n  output: {\n    filename: "[name].[chunkhash].js",\n    path: path.resolve(__dirname, "../dist")\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: "./src/index.html"\n    })\n  ]\n};\n\n')])])]),a("p",[t._v("执行命令"),a("code",[t._v("npm run build")]),t._v("查看打包效果")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(265),width:""}})]),t._v(" "),a("p",[t._v("可以看到，生成的 js 文件自动引入到 html 页面中")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(266),width:""}})]),t._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/plugins/html-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网参考"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"图片处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图片处理"}},[t._v("#")]),t._v(" 图片处理")]),t._v(" "),a("p",[t._v("webpack 默认只支持对 js 代码进行打包，其他文件必须配置对应的 loaders，否则会报错。")]),t._v(" "),a("p",[t._v("通过命令"),a("code",[t._v("npm i url-loader file-loader --save-dev")]),t._v("安装处理的图片的 loader")]),t._v(" "),a("p",[t._v("修改 webpack 配置，添加处理图片的规则如下")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(267),width:""}})]),t._v(" "),a("p",[t._v("示例代码：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('  module:{\n    rules:[\n      {\n        test: /\\.(png|jpg|gif|jpeg)$/,\n        use: [\n          {\n            loader: "url-loader",\n            options: {\n              name: "[name].[ext]",\n              limit: 8192,\n              outputPath: "images"\n            }\n          }\n        ]\n      }\n    ]\n  }\n')])])]),a("p",[t._v("配置说明：")]),t._v(" "),a("p",[a("code",[t._v("name")]),t._v(": 导出图片的命名规则，一般不会修改也不会加哈希值，如果加了哈希值每次部署上线，用户都要重新加载图片，影像效率。")]),t._v(" "),a("p",[a("code",[t._v("limit")]),t._v(": 超过这个配置的图片文件会打包成图片文件，低于怎会打包成 base64 的字符串放在 js 文件中。")]),t._v(" "),a("p",[a("code",[t._v("outputPath")]),t._v(": 把图片打包到指定文件夹中")]),t._v(" "),a("p",[t._v("在入口文件中写测试代码如下")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" import Icon from './images/test.jpg';\n\n  function component() {\n    var element = document.createElement('div');\n\n   // 将图像添加到我们已经存在的 div 中。\n   var myIcon = new Image();\n   myIcon.src = Icon;\n\n   element.appendChild(myIcon);\n\n    return element;\n  }\n\n  document.body.appendChild(component());\n")])])]),a("p",[t._v("打包命令后，打包文件结构如下")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(268),width:""}})]),t._v(" "),a("p",[t._v("将 limit 值大于图片时，再次打包即可发现没有了 test.jpg 文件")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(269),width:""}})]),t._v(" "),a("p",[t._v("打开 index.html 就会发现图片打包成了 base64 代码")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:n(270),width:""}})]),t._v(" "),a("h2",{attrs:{id:"字体文件处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体文件处理"}},[t._v("#")]),t._v(" 字体文件处理")]),t._v(" "),a("p",[t._v("添加处理字体文件的 rule")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    test: /\\.(woff|woff2|eot|ttf|otf)$/,\n    use: [\n          {\n            loader: "file-loader",\n            options: {\n              name: "[name].[ext]",\n              outputPath: "font"\n            }\n        }\n    ]\n}\n')])])]),a("h2",{attrs:{id:"svg-处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#svg-处理"}},[t._v("#")]),t._v(" svg 处理")]),t._v(" "),a("p",[t._v("添加处理 svg 文件的 rule")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('      {\n        test: /\\.svg$/,\n        use: [\n          {\n            loader: "file-loader",\n            options: {\n              name: "[name].[ext]",\n              outputPath: "svg"\n            }\n          }\n        ]\n      }\n')])])]),a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/loaders/url-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网资料 url-loader"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://webpack.docschina.org/loaders/file-loader/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网资料 file-loader"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("url-loader 和 file-loader 之间的关系，url-loader 依赖 file-loader,所以在使用 url-loader 的时候同时也要安装 file-loader。url-loader 有 limit 属性在图片的处理上比 file-loader 更灵活。")])])])}),[],!1,null,null,null);e.default=s.exports}}]);