(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{288:function(e,s,a){e.exports=a.p+"assets/img/11.1b9218c0.png"},289:function(e,s,a){e.exports=a.p+"assets/img/12.7fa9cff7.png"},290:function(e,s,a){e.exports=a.p+"assets/img/14.ab9e4ec9.png"},291:function(e,s,a){e.exports=a.p+"assets/img/15.83f23ae5.png"},292:function(e,s,a){e.exports=a.p+"assets/img/16.e3b5f80d.png"},315:function(e,s,a){"use strict";a.r(s);var t=a(28),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"自写-webpack-打包国土项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自写-webpack-打包国土项目"}},[e._v("#")]),e._v(" 自写 webpack 打包国土项目")]),e._v(" "),t("h2",{attrs:{id:"处理-vue-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#处理-vue-文件"}},[e._v("#")]),e._v(" 处理 vue 文件")]),e._v(" "),t("p",[e._v("安装依赖")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("npm i vue-loader vue-template-compiler --save-dev\n")])])]),t("p",[e._v("添加对 vue 文件的处理规则")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n    test: /\\.vue$/,\n    loader: "vue-loader"\n}\n')])])]),t("p",[e._v("安装 eslint vue 代码检查插件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("npm i eslint-plugin-vue --save-dev\n")])])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),t("p",[e._v("除了添加对 vue 文件的处理规则还需要，引入并使用 VueLoaderPlugin 这个插件。")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:a(288),width:""}})])]),e._v(" "),t("h2",{attrs:{id:"支持-jsx-语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#支持-jsx-语法"}},[e._v("#")]),e._v(" 支持 jsx 语法")]),e._v(" "),t("p",[e._v("很多时候我们会在 js 中写 render 函数渲染页面，但 render 函数中的 jsx 语法 babel 并不认识导致打包出错，因此需要 js 文件中支持 jsx 的语法。")]),e._v(" "),t("p",[e._v("安装依赖")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("npm i babel-helper-vue-jsx-merge-props babel-plugin-transform-vue-jsx babel-plugin-syntax-jsx --save-dev\n")])])]),t("p",[e._v("修改 babel 配置如下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n  "presets": [\n    [\n      "@babel/preset-env",\n      {\n        "useBuiltIns": "usage",\n        "corejs": 2\n      }\n    ]\n  ],\n  "plugins": ["transform-vue-jsx"]\n}\n\n')])])]),t("p",[t("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-transform-vue-jsx",target:"_blank",rel:"noopener noreferrer"}},[e._v("插件参考"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"集成公司的业务代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成公司的业务代码"}},[e._v("#")]),e._v(" 集成公司的业务代码")]),e._v(" "),t("p",[e._v("将我们用于测试的 src 目录删除，将基线的 src 拷贝到我们项目的目录下")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:a(289),width:""}})]),e._v(" "),t("p",[e._v("拷贝公司项目中用到的线上环境的依赖到我们的测试环境中,执行命令"),t("code",[e._v("npm install")]),e._v("安装依赖")]),e._v(" "),t("p",[e._v("在公共配置中添加 resolve 配置如下")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('resolve: {\n    extensions: [".js", ".json", ".vue"],\n    alias: {\n      "@": path.resolve(__dirname, "../src/"),\n      YZT: path.resolve(__dirname, "../src/views/YZT/"),\n      JDGL: path.resolve(__dirname, "../src/views/JDGL/"),\n      FZBZ: path.resolve(__dirname, "../src/views/FZBZ/"),\n      JCYJ: path.resolve(__dirname, "../src/views/JCYJ/"),\n      ZBMX: path.resolve(__dirname, "../src/views/ZBMX/"),\n      YWXT: path.resolve(__dirname, "../src/views/YWXT/"),\n      MXXT: path.resolve(__dirname, "../src/views/MXXT/"),\n      FZSC: path.resolve(__dirname, "../src/views/FZSC/")\n    }\n  }\n')])])]),t("p",[t("code",[e._v("extensions")]),e._v("：自动解析确定的扩展。导入后缀在配置中的文件时不用加后缀名")]),e._v(" "),t("p",[t("code",[e._v("alias")]),e._v("：创建 import 或 require 的别名，来确保模块引入变得更简单。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://webpack.docschina.org/configuration/resolve/#resolve-alias",target:"_blank",rel:"noopener noreferrer"}},[e._v("官网参考"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[e._v("警告")]),e._v(" "),t("p",[e._v("如果要使用国土项目的.eslintrc.js 文件，拷贝过来后需要修改以下配置，如果打包失败可能是依赖缺失，请检查依赖。")])]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:a(290),width:""}})]),e._v(" "),t("p",[e._v("执行打包与基线打包效率对比可以看到用最新的webpack打包在效率上比基线快了很多")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:a(291),width:""}})]),e._v(" "),t("p",[e._v("最后通过copyWebpackPlugin插件，将配置文件拷贝到打包后的文件中。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("npm i copy-webpack-plugin --save-dev\n")])])]),t("p",[e._v("使用该插件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('new copyWebpackPlugin([{ from: "public/static", to: "static" }])\n')])])]),t("p",[t("a",{attrs:{href:"https://webpack.docschina.org/plugins/copy-webpack-plugin/",target:"_blank",rel:"noopener noreferrer"}},[e._v("插件参考"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("最后在网页中查看打包好的系统，可以看到功能都正常。")]),e._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:a(292),width:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);