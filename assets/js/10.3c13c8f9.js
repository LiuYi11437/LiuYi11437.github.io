(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{204:function(a,s,t){a.exports=t.p+"assets/img/img4.19e9d0f8.png"},205:function(a,s,t){a.exports=t.p+"assets/img/img5.18c8ad84.png"},206:function(a,s,t){a.exports=t.p+"assets/img/img6.ac4f4873.png"},297:function(a,s,t){"use strict";t.r(s);var e=t(28),l=Object(e.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"ansible-部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ansible-部署"}},[a._v("#")]),a._v(" ansible 部署")]),a._v(" "),e("h2",{attrs:{id:"新建ansible虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建ansible虚拟机"}},[a._v("#")]),a._v(" 新建ansible虚拟机")]),a._v(" "),e("h2",{attrs:{id:"连接虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接虚拟机"}},[a._v("#")]),a._v(" 连接虚拟机")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ssh root@192.168.11.129\n")])])]),e("h2",{attrs:{id:"关闭防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭防火墙"}},[a._v("#")]),a._v(" 关闭防火墙")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("systemctl stop firewalld\n")])])]),e("h2",{attrs:{id:"禁用防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用防火墙"}},[a._v("#")]),a._v(" 禁用防火墙")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("systemctl disable firewalld\n")])])]),e("h2",{attrs:{id:"编辑selinux，禁用强制安全访问策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编辑selinux，禁用强制安全访问策略"}},[a._v("#")]),a._v(" 编辑selinux，禁用强制安全访问策略")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("vi /etc/sysconfig/selinux\n")])])]),e("p",[e("img",{attrs:{src:t(204),alt:""}})]),a._v(" "),e("h2",{attrs:{id:"重启使禁令生效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重启使禁令生效"}},[a._v("#")]),a._v(" 重启使禁令生效")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("reboot\n")])])]),e("h2",{attrs:{id:"查看禁令是否生效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看禁令是否生效"}},[a._v("#")]),a._v(" 查看禁令是否生效")]),a._v(" "),e("p",[e("img",{attrs:{src:t(205),alt:""}})]),a._v(" "),e("h2",{attrs:{id:"下载python安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载python安装包"}},[a._v("#")]),a._v(" 下载python安装包")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("wget http://www.python.org/ftp/python/3.6.5/Python-3.6.5.tar.xz\n")])])]),e("h2",{attrs:{id:"解压python安装包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压python安装包"}},[a._v("#")]),a._v(" 解压python安装包")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("tar xf Python-3.6.5.tar.xz\n")])])]),e("h2",{attrs:{id:"进入解压目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入解压目录"}},[a._v("#")]),a._v(" 进入解压目录")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("cd Python-3.6.5\n")])])]),e("h2",{attrs:{id:"设定编译参数值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设定编译参数值"}},[a._v("#")]),a._v(" 设定编译参数值")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(' ./configure --prefix=/usr/local --with-ensurepip=install --enable-shared LDFLAGS="-Wl,-rpath /usr/local/lib"\n')])])]),e("p",[a._v("--prefix=usr/local 将Python安装到usr/local目录下")]),a._v(" "),e("p",[a._v("--with-ensurepip=install 安装pipinstall")]),a._v(" "),e("h2",{attrs:{id:"完成编译并将编译好的文件安装到usr-local目录下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完成编译并将编译好的文件安装到usr-local目录下"}},[a._v("#")]),a._v(" 完成编译并将编译好的文件安装到usr/local目录下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("make && make altinstall\n")])])]),e("h3",{attrs:{id:"can-t-decompress-data-zlib-not-available错误解决办法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#can-t-decompress-data-zlib-not-available错误解决办法"}},[a._v("#")]),a._v(" can't decompress data; zlib not available错误解决办法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("1.安装依赖zlib、zlib-devel\nyum install zlib zlib\nyum install zlib zlib-devel\n")])])]),e("h2",{attrs:{id:"查看pip3-6安装路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看pip3-6安装路径"}},[a._v("#")]),a._v(" 查看pip3.6安装路径")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("which pip3.6\n")])])]),e("p",[e("img",{attrs:{src:t(206),alt:""}})]),a._v(" "),e("h2",{attrs:{id:"给pip3-6做一个软链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#给pip3-6做一个软链接"}},[a._v("#")]),a._v(" 给pip3.6做一个软链接")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ln -s /usr/local/bin/pip3.6 /usr/local/bin/pip\n")])])]),e("h2",{attrs:{id:"pip安装virtualenv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pip安装virtualenv"}},[a._v("#")]),a._v(" pip安装virtualenv")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" pip install virtualenv\n")])])]),e("h3",{attrs:{id:"错误处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#错误处理"}},[a._v("#")]),a._v(" 错误处理")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("pip is configured with locations that require TLS/SSL, however the ssl module in Python is not avail\n")])])]),e("p",[a._v("解决方法")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("查看openssl安装包，发现缺少openssl-devel包\n\n[root@localhost ~]# rpm -aq|grep openssl\n\nopenssl-0.9.8e-20.el5\n\nopenssl-0.9.8e-20.el5\n\n[root@localhost ~]#\n\nyum安装openssl-devel\n\n[root@localhost ~]# yum install openssl-devel -y\n\n查看安装结果\n\n[root@localhost ~]# rpm -aq|grep openssl\n\nopenssl-0.9.8e-26.el5_9.1\n\nopenssl-0.9.8e-26.el5_9.1\n\nopenssl-devel-0.9.8e-26.el5_9.1\n\nopenssl-devel-0.9.8e-26.el5_9.1\n\n重新编译python\n")])])]),e("h2",{attrs:{id:"创建一个ansible账户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建一个ansible账户"}},[a._v("#")]),a._v(" 创建一个ansible账户")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v(" useradd deploy\n")])])]),e("h2",{attrs:{id:"登陆deploy用户的命令行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登陆deploy用户的命令行"}},[a._v("#")]),a._v(" 登陆deploy用户的命令行")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  su - deploy\n")])])]),e("h2",{attrs:{id:"在deploy用户下创建一个python3-6版本的deploy实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在deploy用户下创建一个python3-6版本的deploy实例"}},[a._v("#")]),a._v(" 在deploy用户下创建一个python3.6版本的deploy实例")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  virtualenv -p /usr/local/bin/python3.6 .py3-a2.5-env\n")])])]),e("h2",{attrs:{id:"进入实例目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入实例目录"}},[a._v("#")]),a._v(" 进入实例目录")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  cd /home/deploy/.py3-a2.5-env\n")])])]),e("h2",{attrs:{id:"返回root用户安装git"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#返回root用户安装git"}},[a._v("#")]),a._v(" 返回root用户安装git")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  su - root\n  yum -y install git nss curl\n")])])]),e("h2",{attrs:{id:"切换deploy克隆ansible代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#切换deploy克隆ansible代码"}},[a._v("#")]),a._v(" 切换deploy克隆ansible代码")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("  su - deploy\n   git clone https://github.com/ansible/ansible.git\n")])])]),e("h2",{attrs:{id:"加载python3-6-vertualenv环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加载python3-6-vertualenv环境"}},[a._v("#")]),a._v(" 加载python3.6 vertualenv环境")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("   source /home/deploy/.py3-a2.5-env/bin/activate\n")])])]),e("h2",{attrs:{id:"安装ansible依赖包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装ansible依赖包"}},[a._v("#")]),a._v(" 安装ansible依赖包")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    pip install paramiko PyYAML jinja2\n")])])]),e("h2",{attrs:{id:"移动ansible源码到指定文件夹下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#移动ansible源码到指定文件夹下"}},[a._v("#")]),a._v(" 移动ansible源码到指定文件夹下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    mv ansible .py3-a2.5-env/\n")])])]),e("h2",{attrs:{id:"进入ansible源码到指定文件夹下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入ansible源码到指定文件夹下"}},[a._v("#")]),a._v(" 进入ansible源码到指定文件夹下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    cd .py3-a2.5-env/ansible/\n")])])]),e("h2",{attrs:{id:"切换到2-5分支下"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#切换到2-5分支下"}},[a._v("#")]),a._v(" 切换到2.5分支下")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    git checkout stable-2.5\n")])])]),e("h2",{attrs:{id:"在此虚拟环境下加载2-5版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在此虚拟环境下加载2-5版本"}},[a._v("#")]),a._v(" 在此虚拟环境下加载2.5版本")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("     source /home/deploy/.py3-a2.5-env/ansible/hacking/env-setup -q\n")])])]),e("h2",{attrs:{id:"验证是否安装成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证是否安装成功"}},[a._v("#")]),a._v(" 验证是否安装成功")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("ansible --verison\n")])])])])}),[],!1,null,null,null);s.default=l.exports}}]);