(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{159:function(t,s,a){t.exports=a.p+"assets/img/img11.dfc2fa29.png"},204:function(t,s,a){t.exports=a.p+"assets/img/img12.d3ede30b.png"},205:function(t,s,a){t.exports=a.p+"assets/img/img13.f54681d9.png"},206:function(t,s,a){t.exports=a.p+"assets/img/img14.901c1b6f.png"},207:function(t,s,a){t.exports=a.p+"assets/img/img15.f6418d5d.png"},208:function(t,s,a){t.exports=a.p+"assets/img/img16.11b0f933.png"},209:function(t,s,a){t.exports=a.p+"assets/img/img17.fc30d931.png"},210:function(t,s,a){t.exports=a.p+"assets/img/img18.c305fb0f.png"},222:function(t,s,a){"use strict";a.r(s);var e=a(28),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"ansible-playbooks编写规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ansible-playbooks编写规范"}},[t._v("#")]),t._v(" ansible-playbooks编写规范")]),t._v(" "),e("h2",{attrs:{id:"登陆并切换至deploy用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登陆并切换至deploy用户"}},[t._v("#")]),t._v(" 登陆并切换至deploy用户")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ssh root@192.168.11.129\n su - deploy\n")])])]),e("h2",{attrs:{id:"加载python3-6的虚拟环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加载python3-6的虚拟环境"}},[t._v("#")]),t._v(" 加载python3.6的虚拟环境")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" source .py3-a2.5-env/bin/activate\n")])])]),e("h2",{attrs:{id:"加载ansible2-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#加载ansible2-5"}},[t._v("#")]),t._v(" 加载ansible2.5")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" source .py3-a2.5-env/ansible/hacking/env-setup -q\n")])])]),e("h3",{attrs:{id:"验证加载效果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证加载效果"}},[t._v("#")]),t._v(" 验证加载效果")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ansible-playbook --version\n")])])]),e("p",[e("img",{attrs:{src:a(159),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"创建并进入test-playbook目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建并进入test-playbook目录"}},[t._v("#")]),t._v(" 创建并进入test_playbook目录")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" mkdir test_playbooks\n\n cd test_playbooks\n")])])]),e("h2",{attrs:{id:"创建相应目录及文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建相应目录及文件"}},[t._v("#")]),t._v(" 创建相应目录及文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" mkdir inventory\n \n mkdir roles\n\n cd inventory/\n\n vi testenv\n")])])]),e("p",[e("img",{attrs:{src:a(204),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"创建相应目录及主任务文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建相应目录及主任务文件"}},[t._v("#")]),t._v(" 创建相应目录及主任务文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" cd ..\n\n cd roles\n \n mkdir testbox\n\n mkdir testbox\n\n cd testbox\n\n mkdir tasks\n\n cd tasks\n\n vi main.yml\n")])])]),e("p",[e("img",{attrs:{src:a(205),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"回到test-playbook目录下创建任务文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#回到test-playbook目录下创建任务文件"}},[t._v("#")]),t._v(" 回到test_playbook目录下创建任务文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" cd ../../..\n\n vi deploy.yml\n")])])]),e("p",[e("img",{attrs:{src:a(206),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"检查创建的目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#检查创建的目录结构"}},[t._v("#")]),t._v(" 检查创建的目录结构")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" tree .\n")])])]),e("p",[e("img",{attrs:{src:a(207),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"返回root用户修改hosts文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#返回root用户修改hosts文件"}},[t._v("#")]),t._v(" 返回root用户修改hosts文件")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" su - root\n vi /etc/hosts\n")])])]),e("h2",{attrs:{id:"退出root用户创建ssh密钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#退出root用户创建ssh密钥"}},[t._v("#")]),t._v(" 退出root用户创建ssh密钥")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" exit\n ssh-keygen -t rsa\n")])])]),e("p",[e("img",{attrs:{src:a(208),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"将本地创建的公钥传送到目标主机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将本地创建的公钥传送到目标主机"}},[t._v("#")]),t._v(" 将本地创建的公钥传送到目标主机")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ssh-copy-id -i /home/deploy/.ssh/id_rsa.pub root@test.example.com\n")])])]),e("p",[e("img",{attrs:{src:a(209),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"执行任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行任务"}},[t._v("#")]),t._v(" 执行任务")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(" ansible-playbook -i inventory/testenv ./deploy.yml\n")])])]),e("p",[e("img",{attrs:{src:a(210),alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);